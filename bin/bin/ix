#!/bin/bash

opts=""
OPTIND=""
[ -f "$HOME/.netrc" ] && opts='-n'
while getopts ":hd:i:n:" x; do
    case $x in
        h) echo "ix [-d ID] [-i ID] [-n N] [opts]"; exit;;
        i) opts="$opts -X PUT"; id="$OPTARG";;
        n) opts="$opts -F read:1=$OPTARG";;
    esac
done
shift $(($OPTIND - 1))
[ -t 0 ] && {
    filename="$1"
	shift
    [ "$filename" ] && {
		curl $opts -H "Host: w.kilonova.ro" -F f:1=@"$filename" $* "$IXURL"
		exit
    }
    echo "^C to cancel, ^D to send."
}
curl $opts -F f:1='<-' $* "$IXURL"


